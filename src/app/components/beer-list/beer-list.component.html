<div class="container">
  <h1 class="title">Bières</h1>
  
  <!-- Barre de recherche -->
  <div class="search-container">
    <div class="search-wrapper">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input 
        type="text" 
        class="search-input"
        placeholder="Rechercher une bière par nom, tagline ou description..."
        [value]="searchTerm()"
        (input)="onSearchChange($any($event.target).value)"
      />
      @if (searchTerm()) {
        <button class="clear-btn" (click)="onSearchChange('')">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      }
    </div>
    <p class="results-count">{{ filteredBeers().length }} bière(s) trouvée(s)</p>
  </div>
  
  <div class="beer-grid">
    @for (beer of filteredBeers(); track beer.id) {
      <div 
        class="beer-card"
        (click)="openDialog(beer)"
      >
        <div class="beer-image">
          <img [src]="beer.image" [alt]="beer.name">
        </div>
        <div class="beer-content">
          <h2 class="beer-name">{{ beer.name }}</h2>
          <p class="beer-tagline">{{ beer.tagline }}</p>
          <div class="beer-info">
            <span class="info-item">
              <strong>ABV:</strong> {{ beer.abv }}%
            </span>
            <span class="info-item">
              <strong>IBU:</strong> {{ beer.ibu }}
            </span>
          </div>
        </div>
      </div>
    }
    @empty {
      <div class="no-results">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <h3>Aucune bière trouvée</h3>
        <p>Essayez de modifier votre recherche</p>
      </div>
    }
  </div>

  <!-- Dialog -->
  @if (selectedBeer) {
    <div 
      class="dialog-backdrop"
      (click)="onBackdropClick($event)"
    >
    <div class="dialog">
      <!-- <button class="close-btn" (click)="closeDialog()">×</button> -->
      
      <div class="dialog-content">
        <div class="dialog-image">
          <img [src]="selectedBeer.image" [alt]="selectedBeer.name">
        </div>
        
        <div class="dialog-details">
          <h2>{{ selectedBeer.name }}</h2>
          <p class="dialog-tagline">{{ selectedBeer.tagline }}</p>
          
          <div class="dialog-stats">
            <div class="stat">
              <span class="stat-label">Alcool (ABV)</span>
              <span class="stat-value">{{ selectedBeer.abv }}%</span>
            </div>
            <div class="stat">
              <span class="stat-label">Amertume (IBU)</span>
              <span class="stat-value">{{ selectedBeer.ibu }}</span>
            </div>
            <div class="stat">
              <span class="stat-label">Première Production</span>
              <span class="stat-value">{{ selectedBeer.firstBrewed }}</span>
            </div>
          </div>
          
          <div class="dialog-description">
            <h3>Description</h3>
            <p>{{ selectedBeer.description }}</p>
          </div>
        </div>
      </div>
    </div>
  
</div>
  }
</div>